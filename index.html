<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SDS System v3.5</title>
    <style>
        :root { 
            --emerald-main: #4da699; --emerald-light: #e0f2f1; --emerald-dark: #2d6a61; 
            --bg: #f5fbfb; --card: #ffffff; --text: #334e4a; --input-bg: #ffffff;
            --border: #c8e6e1; --accent: #ff8a80;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --emerald-main: #4da699; --emerald-light: #1c2b2b; --emerald-dark: #81cbc0;
                --bg: #0d1111; --card: #161d1d; --text: #d1dada; --input-bg: #0a0e0e; --border: #243333;
            }
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 400px; background: var(--card); padding: 20px; border-radius: 16px; border: 1px solid var(--border); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { font-size: 1.1rem; color: var(--emerald-dark); text-align: center; margin: 0 0 15px 0; letter-spacing: 2px; }
        .section { margin-bottom: 12px; padding-top: 12px; border-top: 1px solid var(--border); }
        label { display: block; margin-bottom: 8px; font-size: 0.75rem; color: var(--emerald-main); font-weight: bold; }
        select, textarea, input { width: 100%; padding: 10px; background: var(--input-bg); color: var(--text); border: 2px solid var(--border); border-radius: 10px; font-size: 16px; appearance: none; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; }
        .opt-btn { background: var(--input-bg); padding: 12px 5px; border-radius: 8px; border: 2px solid var(--border); text-align: center; font-size: 0.8rem; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .opt-btn.active { background: var(--emerald-main); color: #fff; border-color: var(--emerald-main); }
        .opt-btn.accent.active { background: var(--accent); border-color: var(--accent); }
        .counter-wrap { text-align: right; font-size: 0.7rem; color: var(--emerald-main); margin-top: 4px; }
        .main-btn { width: 100%; padding: 16px; background: var(--emerald-main); color: #fff; border: none; border-radius: 10px; font-weight: bold; font-size: 1rem; margin-top: 10px; cursor: pointer; }
        #resultText { height: 160px; margin-top: 15px; border: 2px solid var(--emerald-main); background: var(--input-bg); color: var(--text); font-size: 0.85rem; resize: none; width: 100%; padding: 10px; border-radius: 10px; }
        .btn-copy { width: 100%; padding: 12px; background: var(--emerald-light); color: var(--emerald-dark); border: none; border-radius: 10px; margin-top: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğ’ğƒğ’ ğ†ğ„ğğ„ğ‘ğ€ğ“ğğ‘</h1>

    <div class="grid-2">
        <div>
            <label>TYPE</label>
            <select id="mode" onchange="updateBodyOptions()">
                <option value="OPEN">ã€é–‹åº—ã€‘OPEN</option>
                <option value="CALL">ã€å‘¼ã³è¾¼ã¿ã€‘CALL</option>
                <option value="RESERVE">ã€å‘ŠçŸ¥ã€‘RESERVE</option>
                <option value="CLOSED">ã€é–‰åº—ã€‘CLOSED</option>
            </select>
        </div>
        <div>
            <label>EVENT MODE</label>
            <select id="isEvent" onchange="updateBodyOptions()">
                <option value="no">é€šå¸¸å–¶æ¥­</option>
                <option value="yes">ç‰¹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆ</option>
            </select>
        </div>
    </div>

    <div class="section">
        <label>PHRASE PATTERN</label>
        <select id="bodyPattern"></select>
    </div>

    <div id="urlSection" style="display:none">
        <div class="section">
            <label>OFFICIAL HP URL</label>
            <input type="text" id="hpURL" value="https://piku.page/@SDS_FF14">
        </div>
        <div class="section">
            <label>RESERVATION URL</label>
            <input type="text" id="reserveURL" value="https://forms.gle/EiFinDpVuuoZjFKs7">
        </div>
    </div>

    <div class="section">
        <label>CAST</label>
        <div class="grid-2">
            <div class="opt-btn cast-btn" onclick="tgl(this)" data-val="å«‰å¦¬">å«‰å¦¬</div>
            <div class="opt-btn cast-btn" onclick="tgl(this)" data-val="æš´é£Ÿ">æš´é£Ÿ</div>
            <div class="opt-btn cast-btn" onclick="tgl(this)" data-val="å‚²æ…¢">å‚²æ…¢</div>
            <div class="opt-btn cast-btn" onclick="tgl(this)" data-val="è‰²æ¬²">è‰²æ¬²</div>
        </div>
    </div>

    <div class="section">
        <label>LOCATION (ä½æ‰€è¡¨è¨˜)</label>
        <select id="locType">
            <option value="Elemental Kujata ã‚¨ãƒ³ãƒ”ãƒ¬ã‚¢ãƒ ç¬¬4åŒº54ç•ªåœ°">æ¨™æº– (ãƒ•ãƒ«è¡¨è¨˜)</option>
            <option value="Kujata ã‚¨ãƒ³ãƒ”ãƒ¬ã‚¢ãƒ ç¬¬4åŒº54ç•ªåœ°">çŸ­ã‚ã‚¨ãƒ¬çœ</option>
            <option value="Kujata ã‚¨ãƒ³ãƒ”ãƒ¬ã‚¢ãƒ  4-54">çŸ­ã‚ç•¥</option>
            <option value="Kujata ã‚¨ãƒ³ãƒ” 4-54">çŸ­ã‚ç•¥æ¥µ</option>
            <option value="">è¡¨è¨˜ãªã—</option>
        </select>
    </div>

    <div class="section">
        <label>STATUS BOX</label>
        <div class="grid-3">
            <div class="opt-btn status-btn accent" onclick="tgl(this)" data-val="ã€æœ¬æ—¥ã®ã”æ¡ˆå†…ã¯çµ‚äº†ã—ã¾ã—ãŸã€‘">çµ‚äº†</div>
            <div class="opt-btn status-btn accent" onclick="tgl(this)" data-val="ã€æœ¬æ—¥ã®æŒ‡åçŠ¶æ³ï¼šæº€å“¡ã€‘">æº€å“¡</div>
            <div class="opt-btn status-btn accent" onclick="tgl(this)" data-val="ã€ç¾åœ¨ã€å³æ—¥ã®ã”æ¡ˆå†…å¯èƒ½ã§ã™ã€‘">å³æ¡ˆå†…</div>
        </div>
    </div>

    <div class="section">
        <label>SYSTEM (æ–™é‡‘æ¡ˆå†…)</label>
        <select id="priceSystem">
            <option value="">(æŒ¿å…¥ãªã—)</option>
            <option value="ğŸ’° åŸºæœ¬ç„¡æ–™ï¼ˆæœ‰æ–™ãƒ¡ãƒ‹ãƒ¥ãƒ¼æœ‰ï¼‰">åŸºæœ¬ç„¡æ–™</option>
            <option value="ğŸ’° æœ¬æ—¥ã‚¤ãƒ™ãƒ³ãƒˆã«ã¤ã 10,000gil / 30min">ã‚¤ãƒ™ãƒ³ãƒˆæ–™é‡‘</option>
        </select>
    </div>

    <div class="section">
        <label>FREE MESSAGE</label>
        <textarea id="freeNote" rows="2" placeholder="å‘ŠçŸ¥ãªã©"></textarea>
    </div>

    <button type="button" class="main-btn" onclick="generate()">æ–‡ç« ã‚’ç”Ÿæˆã™ã‚‹</button>
    <textarea id="resultText" readonly></textarea>
    <div class="counter-wrap" style="text-align:left">åˆè¨ˆ: <span id="totalCount">0</span> / 140 æ–‡å­—</div>
    <button type="button" class="btn-copy" onclick="copyText()">çµæœã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
</div>

<script>
const shopTag = "#SDS_FF14";
const evMark = "â”€â”€â”€ âœ§ ğ’ğ©ğğœğ¢ğšğ¥ ğ„ğ¯ğğ§ğ­ âœ§ â”€â”€â”€";

const pts = {
    OPEN: {
        no: [
            "ä»Šå¤œã€è²´æ–¹ã‚’å¾…ã¡å—ã‘ã‚‹ã€Œç½ªã€ã®åŒ–èº«ãŸã¡ã€‚\n[CASTS]\næ¸‡ã„ãŸé­‚ã‚’æ½¤ã™ã€ç‰¹åˆ¥ãªã²ã¨æ™‚ã‚’ã€‚\nå¾“æ¥­å“¡ä¸€åŒã€ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚",
            "ä»Šå®µã€æ‰‰ãŒé–‹ã‹ã‚Œã¾ã™ã€‚\n[CASTS]â”€â”€ [COUNT]ã®æ·±æ·µãŒã€è²´æ–¹æ§˜ã‚’ç”˜ãä¾µé£Ÿã—ã¾ã—ã‚‡ã†ã€‚\nã•ã‚ã€ã©ã®ç½ªã«å •ã¡ã¾ã™ã‹ï¼Ÿ",
            "ä»Šå¤œã‚‚ã€æœ€é«˜ã®æ‚¦æ¥½ã¸æ‹›å¾…ã—ã¾ã—ã‚‡ã†ã€‚\n[CASTS]\nç†æ€§ãªã‚“ã¦å…¥ã‚Šå£ã«æ¨ã¦ã¦ã€ã™ã¹ã¦ã‚’å¥ªã‚ã‚Œã«æ¥ã¦ã€‚"
        ],
        yes: [
            evMark + "\nä»Šå¤œã¯ç‰¹åˆ¥ãªå¤œã€‚ã„ã¤ã‚‚ã¨ã¯é•ã†ç½ªã®å½¢ã‚’ã€ãã®ç›®ã«ç„¼ãä»˜ã‘ã¦ã€‚\n[CASTS] ãŒè²´æ–¹ã‚’ç”˜ã„å¥ˆè½ã¸èª˜ã„ã¾ã™ã€‚",
            evMark + "\nä¸€å¤œé™ã‚Šã®ç‰¹åˆ¥ãªæ‹›å¾…ã€‚é¸ã°ã‚Œã—ã‚­ãƒ£ã‚¹ãƒˆé™£ãŒè²´æ–¹ã®ã€Œç½ªã€ã‚’æš´ãã¾ã—ã‚‡ã†ã€‚\n[CASTS]\nå¿ƒã‚†ãã¾ã§ã€æººã‚Œã¦ã€‚"
        ]
    },
    CALL: {
        no: ["[CASTS] ãŒã€ä»Šã™ãè²´æ–¹ã‚’ç”˜ã„æ‚¦æ¥½ã¸ã”æ¡ˆå†…ã„ãŸã—ã¾ã™ã€‚\nï¼ˆäºˆç´„ãªã—ã®é£›ã³è¾¼ã¿æ­“è¿ï¼‰", "ç¾åœ¨ [CASTS] ã«ç©ºããŒã”ã–ã„ã¾ã™ã€‚\nç‹¬ã‚Šã®å¤œã‚’ã€ç§ãŸã¡ã®ç½ªã§åŸ‹ã‚ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"],
        yes: [evMark + "\nç‰¹åˆ¥ãªå®´ã€ã¾ã ãŠå¸­ãŒã”ã–ã„ã¾ã™ã€‚\n[CASTS] ãŒè²´æ–¹ã®ç†æ€§ã‚’å–ã‚Šå»ã‚Šã¾ã—ã‚‡ã†ã€‚"]
    },
    RESERVE: {
        no: [
            "ã€å…¬å¼HPæ¡ˆå†…ç‰ˆã€‘\nä»Šå®µã®ã€Œç½ªã€ã®è©³ç´°ã¯å…¬å¼HPã‚’ã”è¦§ãã ã•ã„ã€‚\n[CASTS]\nãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„è¦ç´„ã‚‚ã“ã¡ã‚‰ã‹ã‚‰ã”ç¢ºèªã„ãŸã ã‘ã¾ã™ã€‚\n\nğŸŒ [H_URL]",
            "ã€äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ æ¡ˆå†…ç‰ˆã€‘\nã€Œç½ªã€ã¨ã®é€¢ç€¬ã€ç¢ºå®Ÿãªã‚‚ã®ã«ã—ã¾ã›ã‚“ã‹ï¼Ÿ\n[CASTS]\nHPã®äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã€ã¾ãŸã¯ç¾åœ°ã«ã¦ã”äºˆç´„ã‚’æ‰¿ã£ã¦ãŠã‚Šã¾ã™ã€‚\nç©ºããŒã‚ã‚Œã°é£›ã³è¾¼ã¿ã‚‚æ­“è¿ã§ã™ã€‚\nğŸ”— [R_URL]"
        ],
        yes: [
            evMark + "\nç‰¹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆã€äº‹å‰äºˆç´„å—ä»˜ä¸­ã€‚\n[CASTS]\nä¸€å¤œé™ã‚Šã®ç½ªã®å®´ã‚’ã€ç‰¹ç­‰å¸­ã§ã€‚\n\nğŸ”— [R_URL]"
        ]
    },
    CLOSED: {
        no: [
            "ä»Šå¤œã‚‚ã”æ¥åº—ã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚\nè²´æ–¹ã®ç½ªãŒã€ã„ã¤ã¾ã§ã‚‚æ¶ˆãˆã¾ã›ã‚“ã‚ˆã†ã«ã€‚\nãŠã‚„ã™ã¿ãªã•ã„ã€‚",
            "ä»Šå¤œã®å–¶æ¥­ã€ã“ã‚Œã«ã¦é–‰é–€ã„ãŸã—ã¾ã™ã€‚\næ§ã’ã‚‰ã‚ŒãŸå¤šãã®å˜†æ¯ã¨ç†±ã«ã€å¿ƒã‚ˆã‚Šã®æ„Ÿè¬ã‚’ã€‚\nè‰¯ã„æ‚ªå¤¢ã‚’ã€‚"
        ],
        yes: [
            evMark + "\nã‚¤ãƒ™ãƒ³ãƒˆå–¶æ¥­ã€ç„¡äº‹ã«é–‰é–€ã„ãŸã—ã¾ã—ãŸã€‚\nç†±çƒˆãªå¤œã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚",
            evMark + "\nç‰¹åˆ¥ãªä¸€å¤œã‚’å…±ã«éã”ã›ãŸã“ã¨ã«æ„Ÿè¬ã‚’ã€‚\nã¾ãŸã€æ¬¡ã®é–‹é–€ã®æ—¥ã«ãŠä¼šã„ã—ã¾ã—ã‚‡ã†ã€‚"
        ]
    }
};

function tgl(el) { el.classList.toggle('active'); }
function updateBodyOptions() {
    const m = document.getElementById('mode').value;
    const isEv = document.getElementById('isEvent').value;
    const bodySelect = document.getElementById('bodyPattern');
    document.getElementById('urlSection').style.display = (m === 'RESERVE') ? 'block' : 'none';
    bodySelect.innerHTML = "";
    pts[m][isEv].forEach((text, index) => {
        const option = document.createElement('option');
        option.value = index;
        let preview = text.replace(evMark + "\n", "");
        option.text = preview.substring(0, 18).replace('\n', ' ') + "...";
        bodySelect.appendChild(option);
    });
}
function generate() {
    const mode = document.getElementById('mode').value;
    const isEv = document.getElementById('isEvent').value;
    const patternIndex = document.getElementById('bodyPattern').value;
    const freeNote = document.getElementById('freeNote').value;
    const loc = document.getElementById('locType').value;
    const price = document.getElementById('priceSystem').value;
    const hpURL = document.getElementById('hpURL').value;
    const reserveURL = document.getElementById('reserveURL').value;
    
    const selectedCasts = Array.from(document.querySelectorAll('.cast-btn.active')).map(el => el.getAttribute('data-val'));
    const kanji = ["é›¶", "ä¸€ã¤", "äºŒã¤", "ä¸‰ã¤", "å››ã¤"];
    const countText = kanji[selectedCasts.length] || selectedCasts.length + "ã¤";
    const castString = selectedCasts.length > 0 ? `æœ¬æ—¥ã®ç½ªï¼š${selectedCasts.join(' / ')}` : "ç½ªäººä¸åœ¨";
    
    const selectedStatus = Array.from(document.querySelectorAll('.status-btn.active')).map(el => el.getAttribute('data-val'));

    let title = "âœ¦ ğˆğ§ğŸğ¨ğ«ğ¦ğšğ­ğ¢ğ¨ğ§ âœ¦";
    if (mode === 'OPEN') title = "âœ¦ ğğğ„ğ âœ¦";
    else if (mode === 'CALL') title = "âœ¦ ğğ¨ğ° ğ€ğ¯ğšğ¢ğ¥ğšğ›ğ¥ğ âœ¦";
    else if (mode === 'CLOSED') title = "âœ¦ ğ‚ğ¥ğ¨ğ¬ğğ âœ¦";
    else if (mode === 'RESERVE') {
        const pText = pts[mode][isEv][patternIndex];
        title = pText.includes('äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ') ? "âœ¦ ğ‘ğğ¬ğğ«ğ¯ğğ âœ¦" : "âœ¦ ğˆğ§ğŸğ¨ğ«ğ¦ğšğ­ğ¢ğ¨ğ§ âœ¦";
    }

    let result = `${title}\n`;
    if (selectedStatus.length > 0) result += selectedStatus.join('\n') + "\n\n";

    let body = pts[mode][isEv][patternIndex]
                .replace('ã€å…¬å¼HPæ¡ˆå†…ç‰ˆã€‘\n', '').replace('ã€äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ æ¡ˆå†…ç‰ˆã€‘\n', '')
                .replace('[CASTS]', castString)
                .replace('[COUNT]', countText)
                .replace('[H_URL]', hpURL)
                .replace('[R_URL]', reserveURL);
    
    result += body.trim() + "\n\n";

    if (freeNote.trim()) result += freeNote + "\n\n";
    if (price) result += price + "\n";
    if ((mode === 'OPEN' || mode === 'CALL') && loc) result += `ğŸ“ ${loc}\n`;
    result += shopTag;

    const resArea = document.getElementById('resultText');
    resArea.value = result.trim();
    document.getElementById('totalCount').innerText = result.trim().length;
}

updateBodyOptions();

async function copyText() {
    const textarea = document.getElementById('resultText');
    if (!textarea.value) return;
    try {
        await navigator.clipboard.writeText(textarea.value);
        alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
    } catch (err) {
        textarea.select();
        document.execCommand('copy');
        alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
    }
}
</script>
</body>
</html>
